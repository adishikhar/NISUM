{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KIIT\\\\Desktop\\\\Nisum\\\\Sprint3_Day6\\\\q08\\\\src\\\\ProductList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef, useCallback } from \"react\";\nimport ProductCard from \"./ProductCard\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProductList({\n  selectedCategory\n}) {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [skip, setSkip] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const observer = useRef();\n\n  // Reset when category changes\n  useEffect(() => {\n    setProducts([]);\n    setSkip(0);\n  }, [selectedCategory]);\n\n  // Load data\n  useEffect(() => {\n    setLoading(true);\n    let url = `https://dummyjson.com/products?limit=10&skip=${skip}`;\n    if (selectedCategory !== \"All\") {\n      url = `https://dummyjson.com/products/category/${selectedCategory}?limit=10&skip=${skip}`;\n    }\n    fetch(url).then(res => res.json()).then(data => {\n      setProducts(prev => [...prev, ...(data.products || data)]);\n      setLoading(false);\n    }).catch(() => setLoading(false));\n  }, [skip, selectedCategory]);\n\n  // Infinite scroll\n  const lastRef = useCallback(node => {\n    if (loading) return;\n    if (observer.current) observer.current.disconnect();\n    observer.current = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting) setSkip(prev => prev + 10);\n    });\n    if (node) observer.current.observe(node);\n  }, [loading]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product-list\",\n    children: [products.map((p, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: i === products.length - 1 ? lastRef : null,\n      children: /*#__PURE__*/_jsxDEV(ProductCard, {\n        product: p\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, this)\n    }, p.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this)), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading more...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductList, \"bzPJm+01YmQg8ODdHmB292hcbv0=\");\n_c = ProductList;\nexport default ProductList;\nvar _c;\n$RefreshReg$(_c, \"ProductList\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useCallback","ProductCard","jsxDEV","_jsxDEV","ProductList","selectedCategory","_s","products","setProducts","skip","setSkip","loading","setLoading","observer","url","fetch","then","res","json","data","prev","catch","lastRef","node","current","disconnect","IntersectionObserver","entries","isIntersecting","observe","className","children","map","p","i","ref","length","product","fileName","_jsxFileName","lineNumber","columnNumber","id","_c","$RefreshReg$"],"sources":["C:/Users/KIIT/Desktop/Nisum/Sprint3_Day6/q08/src/ProductList.jsx"],"sourcesContent":["\r\nimport React, { useEffect, useState, useRef, useCallback } from \"react\";\r\nimport ProductCard from \"./ProductCard\";\r\n\r\nfunction ProductList({ selectedCategory }) {\r\n  const [products, setProducts] = useState([]);\r\n  const [skip, setSkip] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const observer = useRef();\r\n\r\n  // Reset when category changes\r\n  useEffect(() => {\r\n    setProducts([]);\r\n    setSkip(0);\r\n  }, [selectedCategory]);\r\n\r\n  // Load data\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    let url = `https://dummyjson.com/products?limit=10&skip=${skip}`;\r\n    if (selectedCategory !== \"All\") {\r\n      url = `https://dummyjson.com/products/category/${selectedCategory}?limit=10&skip=${skip}`;\r\n    }\r\n    fetch(url)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        setProducts(prev => [...prev, ...(data.products || data)]);\r\n        setLoading(false);\r\n      })\r\n      .catch(() => setLoading(false));\r\n  }, [skip, selectedCategory]);\r\n\r\n  // Infinite scroll\r\n  const lastRef = useCallback(\r\n    node => {\r\n      if (loading) return;\r\n      if (observer.current) observer.current.disconnect();\r\n      observer.current = new IntersectionObserver(entries => {\r\n        if (entries[0].isIntersecting) setSkip(prev => prev + 10);\r\n      });\r\n      if (node) observer.current.observe(node);\r\n    },\r\n    [loading]\r\n  );\r\n\r\n  return (\r\n    <div className=\"product-list\">\r\n      {products.map((p, i) => (\r\n        <div key={p.id} ref={i === products.length - 1 ? lastRef : null}>\r\n          <ProductCard product={p} />\r\n        </div>\r\n      ))}\r\n      {loading && <p>Loading more...</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}