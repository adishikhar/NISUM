{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KIIT\\\\Desktop\\\\Nisum\\\\Sprint3_Day6\\\\q08\\\\src\\\\ProductList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport ProductCard from \"./ProductCard\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProductList({\n  category\n}) {\n  _s();\n  const [items, setItems] = useState([]);\n  const [limit] = useState(5);\n  const [page, setPage] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const observer = useRef();\n  useEffect(() => {\n    setItems([]);\n    setPage(1);\n  }, [category]);\n  useEffect(() => {\n    setLoading(true);\n    const url = category === \"All\" ? `https://fakestoreapi.com/products?limit=${limit}&sort=asc` : `https://fakestoreapi.com/products/category/${encodeURIComponent(category)}?limit=${limit}&sort=asc`;\n    fetch(url + `&page=${page}`).then(res => res.json()).then(data => {\n      if (data.length) setItems(prev => [...prev, ...data]);\n      setLoading(false);\n    });\n  }, [page, category, limit]);\n  const lastRef = useCallback(node => {\n    if (loading) return;\n    if (observer.current) observer.current.disconnect();\n    observer.current = new IntersectionObserver(([entry]) => {\n      if (entry.isIntersecting) setPage(prev => prev + 1);\n    });\n    if (node) observer.current.observe(node);\n  }, [loading]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product-list\",\n    children: [items.map((p, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: i === items.length - 1 ? lastRef : null,\n      children: /*#__PURE__*/_jsxDEV(ProductCard, {\n        product: p\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this)\n    }, p.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this)), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductList, \"AGJItBYbRj0ndbfYoIrlI5quWnk=\");\n_c = ProductList;\nexport default ProductList;\nvar _c;\n$RefreshReg$(_c, \"ProductList\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","ProductCard","jsxDEV","_jsxDEV","ProductList","category","_s","items","setItems","limit","page","setPage","loading","setLoading","observer","url","encodeURIComponent","fetch","then","res","json","data","length","prev","lastRef","node","current","disconnect","IntersectionObserver","entry","isIntersecting","observe","className","children","map","p","i","ref","product","fileName","_jsxFileName","lineNumber","columnNumber","id","_c","$RefreshReg$"],"sources":["C:/Users/KIIT/Desktop/Nisum/Sprint3_Day6/q08/src/ProductList.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport ProductCard from \"./ProductCard\";\r\n\r\nfunction ProductList({ category }) {\r\n  const [items, setItems] = useState([]);\r\n  const [limit] = useState(5);\r\n  const [page, setPage] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  const observer = useRef();\r\n\r\n  useEffect(() => {\r\n    setItems([]);\r\n    setPage(1);\r\n  }, [category]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const url =\r\n      category === \"All\"\r\n        ? `https://fakestoreapi.com/products?limit=${limit}&sort=asc`\r\n        : `https://fakestoreapi.com/products/category/${encodeURIComponent(\r\n            category\r\n          )}?limit=${limit}&sort=asc`;\r\n    fetch(url + `&page=${page}`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        if (data.length) setItems(prev => [...prev, ...data]);\r\n        setLoading(false);\r\n      });\r\n  }, [page, category, limit]);\r\n\r\n  const lastRef = useCallback(\r\n    node => {\r\n      if (loading) return;\r\n      if (observer.current) observer.current.disconnect();\r\n      observer.current = new IntersectionObserver(([entry]) => {\r\n        if (entry.isIntersecting) setPage(prev => prev + 1);\r\n      });\r\n      if (node) observer.current.observe(node);\r\n    },\r\n    [loading]\r\n  );\r\n\r\n  return (\r\n    <div className=\"product-list\">\r\n      {items.map((p, i) => (\r\n        <div key={p.id} ref={i === items.length - 1 ? lastRef : null}>\r\n          <ProductCard product={p} />\r\n        </div>\r\n      ))}\r\n      {loading && <p>Loading...</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}